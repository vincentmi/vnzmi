<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="我的乐与怒">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="//img/car2.jpg">
    <meta property="twitter:image" content="//img/car2.jpg" />
    

    
    <meta name="title" content="用RF24创建无线传感器网络" />
    <meta property="og:title" content="用RF24创建无线传感器网络" />
    <meta property="twitter:title" content="用RF24创建无线传感器网络" />
    

    
    <meta name="description" content="In code we trust">
    <meta property="og:description" content="In code we trust" />
    <meta property="twitter:description" content="In code we trust" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="我的乐与怒,vincent mi, miwenshu, 电商,  博客, 个人网站, 互联网, Web, 云原生, PaaS, Java, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>用RF24创建无线传感器网络 | 我的乐与怒 | Vincent&#39;s Blog</title>

    <link rel="canonical" href="/post/2015-05-10-rf24network-for-wireless-sensor-networking/">

    


    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link rel="stylesheet" href="/fontawesome-free-6.4.0-web/css/all.min.css" rel="stylesheet" type="text/css">
    
    

    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    <script src="/js/lazysizes.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">我的乐与怒</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">首页</a>
                    </li>
                    
                        
                    
                    
		    
                        <li><a href="/about/">我</a></li>
                    
                        <li><a href="/archive/">归档</a></li>
                    
                        <li><a href="/search/">搜索</a></li>
                    
                        <li><a href="/codesketch/">CodeSketch</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/post-bg.jpg')
    }
    
    .titleColor {
        text-align: center;font-size:80px;
        color: #FFFFFF;
    }
   
    
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/hw" title="HW">
                            HW
                        </a>
                        
                        <a class="tag" href="/tags/arduino" title="Arduino">
                            Arduino
                        </a>
                        
                        <a class="tag" href="/tags/nrf24l01" title="nRF24L01">
                            nRF24L01
                        </a>
                        
                    </div>
                    <h1 class="titleColor">用RF24创建无线传感器网络</h1>
                    <h2 class="subheading titleColor"></h2>
                    <span class="meta titleColor">
                        
                            Posted by 
                            
                                Vincent
                             
                            on 
                            Sunday, May 10, 2015
                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <p>英文原版 <a href="https://maniacbug.wordpress.com/2012/03/30/rf24network/">https://maniacbug.wordpress.com/2012/03/30/rf24network/</a></p>
<p>翻译: Vincent Mi <a href="http://vnzmi.com/rf24network-for-wireless-sensor-networking.html">http://vnzmi.com/rf24network-for-wireless-sensor-networking.html</a></p>
<p>
  <img src="/img/in-post/3153790176.jpg" alt="7013108743_416996c44c_z.jpg">

</p>
<p><a href="http://maniacbug.github.io/RF24Network/">RF24Network</a>网络是一个使用Nordic nRF24L01+ 无线，运行在Arduino兼容硬件的网络层。他的目标是成为Arduino单元通信的除Xbee外的另外一个选择。他提供一个主机地址空间和消息路由最高支持6000个节点，形成一个有能力和可扩展的无线传感器网络系统。 同时让两个节点之间的通讯更加简单。</p>
<p>今天，我在一个单独的网络管理17个节点。现在我需要创建更多的节点，因为这个系统可以很好的工作在17个节点，也可以处理上千的节点。</p>
<h2 id="硬件">硬件</h2>
<p>Arduino ,最快的获取RF24兼容硬件的方式是创建一个入门板，或者ProtoShield板。这些可以从其他的一些文章找到。如下图中 03 和043。
.</p>
<p>最后我需要一些更小，更便宜，更节能，所以我创建了一个低能耗无线传感器节点。这篇文章内容使用了V3版本的传感器单元。见附图，他们是04，011，021，而01，02使用的是更早的版本。其余的使用更高的版本。创建的他们的方式都略有不同。这带给我大量经验去找到更好的打包方式。最后031节点获得了优胜。将作为V5版本进行迭代优化。我将创建10个使用2个AA电池安装PCB板的节点。</p>
<h2 id="简单的发送和接收">简单的发送和接收</h2>
<p>这个Hello World示例说明在两个节点通讯有多简单。接收在一个节点发送在另外的节点。</p>
<p>这里有三个部分:</p>
<h3 id="静态初始化">静态初始化</h3>
<p>首先，静态初始化准备这个无线电，设置地址。在这个例子，我们认为我们自己是  &ldquo;Node #1&rdquo; ,将与 &ldquo;Node #0&rdquo; 进行通讯。当然跳线要结对。在这个例子中我们使用9和10.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// nRF24L01(+) radio attached using Getting Started board 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>RF24 <span style="color:#c0f">radio</span>(<span style="color:#f60">9</span>,<span style="color:#f60">10</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Network uses that radio
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>RF24Network <span style="color:#c0f">network</span>(radio);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Address of our node
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">uint16_t</span> this_node <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Address of the other node
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">uint16_t</span> other_node <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// How often to send &#39;hello world to the other unit
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> interval <span style="color:#555">=</span> <span style="color:#f60">2000</span>; <span style="color:#09f;font-style:italic">//ms
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// When did we last send?
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> last_sent;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// How many have we sent already
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> packets_sent;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Structure of our payload
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">payload_t</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> ms;
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> counter;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="setup">setup()</h3>
<p>第二步, ‘setup()’ 简单的打印出一个欢迎信息并初始化无线层。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">setup</span>(<span style="color:#078;font-weight:bold">void</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  Serial.begin(<span style="color:#f60">57600</span>);
</span></span><span style="display:flex;"><span>  Serial.println(<span style="color:#c30">&#34;RF24Network/examples/helloworld_tx/&#34;</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  SPI.begin();
</span></span><span style="display:flex;"><span>  radio.begin();
</span></span><span style="display:flex;"><span>  network.begin(<span style="color:#09f;font-style:italic">/*channel*/</span> <span style="color:#f60">90</span>, <span style="color:#09f;font-style:italic">/*node address*/</span> this_node);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="发送-loop">发送 loop()</h3>
<p>最后, loop()通常发送消息到其他单元。 记住RF24Network通常需要调用update() 来处理数据包。最好不要调用delay在整个系统中。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">loop</span>(<span style="color:#078;font-weight:bold">void</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#09f;font-style:italic">// Pump the network regularly
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  network.update();
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#09f;font-style:italic">// If it&#39;s time to send a message, send it!
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> now <span style="color:#555">=</span> millis();
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">if</span> ( now <span style="color:#555">-</span> last_sent <span style="color:#555">&gt;=</span> interval  )
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    last_sent <span style="color:#555">=</span> now;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    Serial.print(<span style="color:#c30">&#34;Sending...&#34;</span>);
</span></span><span style="display:flex;"><span>    payload_t payload <span style="color:#555">=</span> { millis(), packets_sent<span style="color:#555">++</span> };
</span></span><span style="display:flex;"><span>    RF24NetworkHeader header(<span style="color:#09f;font-style:italic">/*to node*/</span> other_node);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">bool</span> ok <span style="color:#555">=</span> network.write(header,<span style="color:#555">&amp;</span>payload,<span style="color:#069;font-weight:bold">sizeof</span>(payload));
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (ok)
</span></span><span style="display:flex;"><span>      Serial.println(<span style="color:#c30">&#34;ok.&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>      Serial.println(<span style="color:#c30">&#34;failed.&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="接收-loop">接收 loop()</h3>
<p>还有我们来看一下接收器的例子，这个和传输的loop()有所不同。他一直查询数据包从无线模块取出，打印到控制台。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">loop</span>(<span style="color:#078;font-weight:bold">void</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#09f;font-style:italic">// Pump the network regularly
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  network.update();
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#09f;font-style:italic">// Is there anything ready for us?
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#069;font-weight:bold">while</span> ( network.available() )
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// If so, grab it and print it out
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    RF24NetworkHeader header;
</span></span><span style="display:flex;"><span>    payload_t payload;
</span></span><span style="display:flex;"><span>    network.read(header,<span style="color:#555">&amp;</span>payload,<span style="color:#069;font-weight:bold">sizeof</span>(payload));
</span></span><span style="display:flex;"><span>    Serial.print(<span style="color:#c30">&#34;Received packet #&#34;</span>);
</span></span><span style="display:flex;"><span>    Serial.print(payload.counter);
</span></span><span style="display:flex;"><span>    Serial.print(<span style="color:#c30">&#34; at &#34;</span>);
</span></span><span style="display:flex;"><span>    Serial.println(payload.ms);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="地址分布">地址分布</h3>
<p>
  <img src="/img/in-post/2931979606.jpg" alt="7015275513_73663f8a74.jpg">

</p>
<p>RF24Network在节点少的时候工作的非常好，但是他是设计用于整个房间的节点。节点在树拓扑中根据节点地址自动配置。节点只能直接与他们的父节点和子节点进行通信。网络将自动发送消息到正确的地方。</p>
<p><code>#00</code>是 基础节点，<code>#01-#05</code> 直接与<code>#00</code>通讯，但是互相之间不进行通讯。所以如果#01要发送消息到#02，他将通过#00的转发，<code>#011</code>,<code>#021</code>,<code>#031</code>等等是<code>#01</code>的子节点。所以<code>#011</code>发送到<code>#02</code>,他将发送到 <code>#01</code>然后<code>#00</code> 然后<code>#02</code>.因此，如果你放一个节点#011到你的网络，确定有节点#01在网络，并且是开启电源也在通讯范围内。</p>
<p>
  <img src="/img/in-post/2760920830.jpg" alt="6782822751_739036c12e.jpg">

</p>
<p>在实践中，我设计了router(路由)节点 #01-#05到每一层，使用了外接天线和墙壁电源。然后本层的所有节点都与本层的父节点进行通讯。上面的图片是一个标准的V3节点，加上特别的电源模块。以便可以插入墙壁电源。无线单元被加上了天线。</p>
<h3 id="创建无线传感器网络">创建无线传感器网络</h3>
<p>sensornet（传感器网络）的例子是开始创建传感器网络的地方。这个例子演示如何从任意节点发送一对传感器读数到根节点。
读数是一个连接到模拟输入A2的温度传感器，以及一个电压传感器连接到A3口。每个节点没4秒会发送ping到基本节点。这个一个很好的心跳检测。在实际的系统中你将可能需要更长的时间间隔。叶子节点将休眠以延迟电池寿命。</p>
<p>根节点简单的转储到控制台并跟踪数据包的丢失情况。这样我们可以在测试时检查网络的健康状况。在真实的应用中。你可能需要存储或者发送这些内容到其他地方。比如 Pachube（Vincent:一个云平台，收集传感器信息）；</p>
<h3 id="载荷详情">载荷详情</h3>
<p>RF24网络在每一帧中发送2部分的内容，头和内容。头由库文件定义用来确保帧被发送到正确的地方和提供标准信息。定义在RF24Network.h 中.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">* Header which is sent with each message
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">*
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">* The frame put over the air consists of this header and a message
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">RF24NetworkHeader</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">uint16_t</span> from_node; <span style="color:#09f;font-style:italic">/**&lt; Logical address where the message was generated */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">uint16_t</span> to_node; <span style="color:#09f;font-style:italic">/**&lt; Logical address where the message is going */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">uint16_t</span> id; <span style="color:#09f;font-style:italic">/**&lt; Sequential message ID, incremented every message */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">char</span> type; <span style="color:#09f;font-style:italic">/**&lt; Type of the packet.  0-127 are user-defined types, 128-255 are reserved for system */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">char</span> reserved; <span style="color:#09f;font-style:italic">/**&lt; Reserved for future use */</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>这个消息是由应用定义，页头使用一个单独的字符来跟踪消息的类型。这样你的应用可以有不同的消息类型来传输不同类型的信息。在这个sersornet示例中，我们将只使用类型为S的消息。意思是 &ldquo;Sensor Data&rdquo;.</p>
<p>消息的定义在头文件S_message.h:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">* Sensor message (type &#39;S&#39;) 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">S_message</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">uint16_t</span> temp_reading;
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">uint16_t</span> voltage_reading;
</span></span><span style="display:flex;"><span>  S_message(<span style="color:#078;font-weight:bold">void</span>)<span style="color:#555">:</span> temp_reading(<span style="color:#f60">0</span>), voltage_reading(<span style="color:#f60">0</span>), counter(next_counter<span style="color:#555">++</span>) {}
</span></span><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">char</span><span style="color:#555">*</span> <span style="color:#c0f">toString</span>(<span style="color:#078;font-weight:bold">void</span>);
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>这个简单的包含了一个温度和电压读数。这个值是8.8位值，高位是数字低位是小数。例如 3.5V则为0x380.还包含一个方法转换成字符串用于输出。</p>
<h3 id="电压传感器">电压传感器</h3>
<p>我喜欢监控每个节点的电池的级别，这样我可以知道是否一个节点什么时候需要更换电池。因此我连接来自我们电池的正级到电压传感器的输入。通过一个分压器:</p>
<p>
  <img src="/img/in-post/706352279.jpg" alt="6046166167_fb49f479d2_n.jpg">

</p>
<p>我使用一个1M/479K 分频器电路。他将3.44V电压降低到1.1V,然后使用这个1.1V的电压做参考。这对于我的使用很完美，因为我不会使用超过3.44V的电压。当然如果你的电压超过了，你将需要一个大点的分压器。在我的这个示例中，当analogRead(A3)返回1024，我的电压是3.44V.代码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// What voltage is a reading of 1023?
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">unsigned</span> voltage_reference <span style="color:#555">=</span> <span style="color:#f60">5</span> <span style="color:#555">*</span> <span style="color:#f60">256</span>; <span style="color:#09f;font-style:italic">// 5.0V
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// How many measurements to take.  64*1024 = 65536, so 64 is the max we can fit in a uint16_t.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> num_measurements <span style="color:#555">=</span> <span style="color:#f60">64</span>;
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// Take the voltage reading 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    i <span style="color:#555">=</span> num_measurements;
</span></span><span style="display:flex;"><span>    reading <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i<span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>      reading <span style="color:#555">+=</span> analogRead(voltage_pin);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// Convert the voltage reading to volts*256
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    message.voltage_reading <span style="color:#555">=</span> ( reading <span style="color:#555">*</span> voltage_reference ) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">16</span>;
</span></span></code></pre></div><p>首先,我获取64个读数，去得到一个良好的的样本大小，对于64个读数另外一个优势是这样的，他使用16bit的uint16_t，所以一个值0x8000是最大值1.1V的一半。下面我与电压参考相乘。这个参考认为.
First, I take 64 readings, to get a good sample size. The other advantage to 64 readings is that it uses the full 16-bits of a uint16_t, so a value of 0x8000 is half of the max 1.1V. Next, I multiply it by the voltage reference. That reference considers the voltage divider I have in place, telling me what voltage I ‘really‘ have on the battery if I get an 0xFFFF reading. In the case of the example, it’s 0x500, or 5V. Finally, I shift it down so the decimal point is in the correct place for an 8.8 fixed point value.</p>
<h3 id="温度传感器">温度传感器</h3>
<p>在这个例子中，我选择MCP9700作为我的温度传感器。你可以选择任何你喜欢的传感器，只是记得调整计算公式。MCP9700工作时产生0.5V的电压在0度。每增加1度电压增加0.01V。完美的1.1V内部模拟参考。下面是在示例中的使用：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>   <span style="color:#09f;font-style:italic">// Take the temp reading 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    i <span style="color:#555">=</span> num_measurements;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">uint32_t</span> reading <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i<span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>      reading <span style="color:#555">+=</span> analogRead(temp_pin);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// Convert the voltage reading to celsius*256
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// This is the formula for MCP9700.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// V = reading * 1.1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// C = ( V - 1/2 ) * 100
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>     message.temp_reading <span style="color:#555">=</span> ( ( ( reading <span style="color:#555">*</span> <span style="color:#f60">0x120</span> ) <span style="color:#555">-</span> <span style="color:#f60">0x800000</span> ) <span style="color:#555">*</span> <span style="color:#f60">0x64</span> ) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">16</span>;
</span></span></code></pre></div><p>和上面一样，我首先采样64此以获取0x0000 到 0xFFFF的值。然后使用以下的步骤进行转换：</p>
<ul>
<li>乘以0x120将 1.1进行8.8的小数点修正. 读入伏数并且增加增加8位小数位。</li>
<li>减 0x800000,也就是 0.5, 因为小数位超出了24bit.</li>
<li>乘 0x64 也就是 100</li>
<li>右移16位,将小数点从24bit移到我们需要的8bit.</li>
</ul>
<p>所有这些工作是在一个32位的整数，以便有充足的位来执行此计算。</p>
<h3 id="部署">部署</h3>
<p>将代码上传到每个节点，开始他首选连接到串口，你可以给它设置一个地址:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>RF24network<span style="color:#555">/</span>examples<span style="color:#555">/</span>sensornet<span style="color:#555">/</span>
</span></span><span style="display:flex;"><span><span style="color:#99f">PLATFORM</span>: Getting Started Board
</span></span><span style="display:flex;"><span><span style="color:#99f">VERSION</span>: <span style="color:#f60">013</span>b4d3
</span></span><span style="display:flex;"><span><span style="color:#555">***</span> No valid address found. Send node address via serial of the form <span style="color:#f60">011</span><span style="color:#555">&lt;</span>cr<span style="color:#555">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1733003</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">16</span> <span style="color:#f60">24.23</span>C <span style="color:#555">/</span> <span style="color:#f60">3.21</span>V from <span style="color:#f60">053</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1733709</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">37</span> <span style="color:#f60">23.82</span>C <span style="color:#555">/</span> <span style="color:#f60">2.70</span>V from <span style="color:#f60">043</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1734297</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">109</span> <span style="color:#f60">24.46</span>C <span style="color:#555">/</span> <span style="color:#f60">3.06</span>V from <span style="color:#f60">013</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1735108</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">55</span> <span style="color:#f60">25.16</span>C <span style="color:#555">/</span> <span style="color:#f60">3.06</span>V from <span style="color:#f60">033</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1735224</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">134</span> <span style="color:#f60">22.66</span>C <span style="color:#555">/</span> <span style="color:#f60">2.71</span>V from <span style="color:#f60">031</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1735286</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">287</span> <span style="color:#f60">25.10</span>C <span style="color:#555">/</span> <span style="color:#f60">3.24</span>V from <span style="color:#f60">01</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1735565</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">299</span> <span style="color:#f60">24.79</span>C <span style="color:#555">/</span> <span style="color:#f60">3.36</span>V from <span style="color:#f60">03</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1736871</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">71</span> <span style="color:#f60">25.78</span>C <span style="color:#555">/</span> <span style="color:#f60">3.07</span>V from <span style="color:#f60">023</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1737094</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">137</span> <span style="color:#f60">22.89</span>C <span style="color:#555">/</span> <span style="color:#f60">3.01</span>V from <span style="color:#f60">041</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1737119</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">120</span> <span style="color:#f60">23.69</span>C <span style="color:#555">/</span> <span style="color:#f60">2.98</span>V from <span style="color:#f60">011</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1737247</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">17</span> <span style="color:#f60">24.23</span>C <span style="color:#555">/</span> <span style="color:#f60">3.21</span>V from <span style="color:#f60">053</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1738025</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">38</span> <span style="color:#f60">23.82</span>C <span style="color:#555">/</span> <span style="color:#f60">2.70</span>V from <span style="color:#f60">043</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1738361</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">110</span> <span style="color:#f60">24.45</span>C <span style="color:#555">/</span> <span style="color:#f60">3.06</span>V from <span style="color:#f60">013</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1739286</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">288</span> <span style="color:#f60">25.11</span>C <span style="color:#555">/</span> <span style="color:#f60">3.24</span>V from <span style="color:#f60">01</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1739404</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">56</span> <span style="color:#f60">25.16</span>C <span style="color:#555">/</span> <span style="color:#f60">3.06</span>V from <span style="color:#f60">033</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1739565</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">300</span> <span style="color:#f60">24.78</span>C <span style="color:#555">/</span> <span style="color:#f60">3.36</span>V from <span style="color:#f60">03</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1739574</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">135</span> <span style="color:#f60">22.68</span>C <span style="color:#555">/</span> <span style="color:#f60">2.71</span>V from <span style="color:#f60">031</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1741043</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">72</span> <span style="color:#f60">25.77</span>C <span style="color:#555">/</span> <span style="color:#f60">3.07</span>V from <span style="color:#f60">023</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1741213</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">138</span> <span style="color:#f60">22.87</span>C <span style="color:#555">/</span> <span style="color:#f60">3.01</span>V from <span style="color:#f60">041</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1741490</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">121</span> <span style="color:#f60">23.68</span>C <span style="color:#555">/</span> <span style="color:#f60">2.98</span>V from <span style="color:#f60">011</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1741492</span><span style="color:#555">:</span> APP Received <span style="color:#a00;background-color:#faa">#</span><span style="color:#f60">18</span> <span style="color:#f60">24.21</span>C <span style="color:#555">/</span> <span style="color:#f60">3.21</span>V from <span style="color:#f60">053</span>
</span></span></code></pre></div><h3 id="设置休眠时间间隔">设置休眠时间间隔</h3>
<p>一旦他启动并且运行。你可以修改为更适合正式网络的休眠时间。我设置为每分钟从节点读取一次读数，这个可能不合适，但是可以提供一更多的扩展性。业务有时候当多个节点数据同一时间抵达跟节点时会有一些麻烦，这是一些调整的值:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Sleep constants.  In this example, the watchdog timer wakes up
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// every 4s, and every single wakeup we power up the radio and send
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// a reading.  In real use, these numbers which be much higher.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Try wdt_8s and 7 cycles for one reading per minute.&gt; 1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> wdt_prescalar_e wdt_prescalar <span style="color:#555">=</span> wdt_4s;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> sleep_cycles_per_transmission <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span></code></pre></div><h3 id="接下来的步骤">接下来的步骤</h3>
<p>这个传感器网络实例可以设置大量的传感器节点让他们启动和运行。但是之后你将如何使用这些数据？或许你像传输或者存储到某些地方，这个将会是下一篇介绍的内容。</p>
<h5 id="提交到pachube">提交到Pachube</h5>
<p>和NanoDeVIP合并，我们可以从数以千计的传感器提交读数到Pachube.(或者至少从17个开始:))。</p>
<h5 id="使用pc程序来监控网络">使用PC程序来监控网络</h5>
<p>串口包含包含了比较多的节点信息。我正在开发一个C# WPF应用程序去总揽一个网络查看网络的工作情况。这非常不错，完成后我会分享给大家。</p>
<h5 id="个人的简化版pachube">个人的简化版Pachube.</h5>
<p>Pachube是一个非常棒的东西，但是有几次我可能需要自己调整扑捉我数据库的读数。他回比Pachube做的少 但是我们对我的读数数据库进行我想做的任何操作。我写好了我自己的PHP+MySQL方案，但是不太好移植。我最新的想法是用Ruby on Rail服务器来实现他，ROR看起来很适合做这个。</p>
<p>附件作者的源代码 <a href="/img/in-post/1928276898.zip">sensornet.zip</a></p>
<p><a href="http://maniacbug.github.com/RF24">RF24 Git Repo</a>
<a href="http://maniacbug.github.com/RF24Network">RF24 Network Repo</a></p>
<pre><code>VCC  -|       |-VCC
CE   -|       |-CSN
SCK  -|       |-MOSI
MISO -|       |-IRQ
GND  -|       |-GND

Line	Arduino
GND	        GND	
3V3	        3V3	
CE	         9	
CSN	        10	
SCK	        13	
MOSI	11	
MISO	12
</code></pre>

                
                
<div class="entry-shang text-center">
    
	    <p>「真诚赞赏，手留余香」</p>
	
	<button class="zs show-zs btn btn-bred">赞赏支持</button>
</div>
<div class="zs-modal-bg"></div>
<div class="zs-modal-box">
	<div class="zs-modal-head">
		<button type="button" class="close">×</button>
		<span class="author"><a href="/"><img src="/img/favicon.png" />我的乐与怒</a></span>
        
	        <p class="tip"><i></i><span>真诚赞赏，手留余香</span></p>
		
 
	</div>
	<div class="zs-modal-body">
		<div class="zs-modal-btns">
			<button class="btn btn-blink" data-num="2">2元</button>
			<button class="btn btn-blink" data-num="5">5元</button>
			<button class="btn btn-blink" data-num="10">10元</button>
			<button class="btn btn-blink" data-num="50">50元</button>
			<button class="btn btn-blink" data-num="100">100元</button>
			<button class="btn btn-blink" data-num="1">任意金额</button>
		</div>
		<div class="zs-modal-pay">
			<button class="btn btn-bred" id="pay-text">2元</button>
			<p>使用<span id="pay-type">微信</span>扫描二维码完成支付</p>
			<img src="/img/reward/wechat-2.png"  id="pay-image"/>
		</div>
	</div>
	<div class="zs-modal-footer">
		<label><input type="radio" name="zs-type" value="wechat" class="zs-type" checked="checked"><span ><span class="zs-wechat"><img src="/img/reward/wechat-btn.png"/></span></label>
		<label><input type="radio" name="zs-type" value="alipay" class="zs-type" class="zs-alipay"><img src="/img/reward/alipay-btn.png"/></span></label>
	</div>
</div>
<script type="text/javascript" src="/js/reward.js"></script>

                

                
                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/2015-05-08-enc28j60/" data-toggle="tooltip" data-placement="top" title="ENC28J60接线"><i class="fa fa-angle-left fa-lg"></i>
                            Previous</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/2015-06-04-cxf-header/" data-toggle="tooltip" data-placement="top" title="CXF添加Header">Next
                        <i class="fa fa-angle-right fa-lg"></i></a>
                    </li>
                    
                </ul>
                

                



            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">目录</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">标签</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        <a href="/tags/aframe" title="aframe">
                            aframe
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/andrew-ng" title="andrew-ng">
                            andrew-ng
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/arduino" title="arduino">
                            arduino
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/blockchain" title="blockchain">
                            blockchain
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/cgi" title="cgi">
                            cgi
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/consul" title="consul">
                            consul
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/eth" title="eth">
                            eth
                        </a>
                        
                        
                        
                        <a href="/tags/ethereum" title="ethereum">
                            ethereum
                        </a>
                        
                        
                        
                        <a href="/tags/evm" title="evm">
                            evm
                        </a>
                        
                        
                        
                        <a href="/tags/feign" title="feign">
                            feign
                        </a>
                        
                        
                        
                        <a href="/tags/flask" title="flask">
                            flask
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/golang" title="golang">
                            golang
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/hw" title="hw">
                            hw
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/java" title="java">
                            java
                        </a>
                        
                        
                        
                        <a href="/tags/javascript" title="javascript">
                            javascript
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/jpa" title="jpa">
                            jpa
                        </a>
                        
                        
                        
                        <a href="/tags/js" title="js">
                            js
                        </a>
                        
                        
                        
                        <a href="/tags/k8s" title="k8s">
                            k8s
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/kubernetes" title="kubernetes">
                            kubernetes
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/linux" title="linux">
                            linux
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/mac" title="mac">
                            mac
                        </a>
                        
                        
                        
                        <a href="/tags/machine-learning" title="machine-learning">
                            machine-learning
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/math" title="math">
                            math
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/mysql" title="mysql">
                            mysql
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/nginx" title="nginx">
                            nginx
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/op" title="op">
                            op
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/opentcv" title="opentcv">
                            opentcv
                        </a>
                        
                        
                        
                        <a href="/tags/ops" title="ops">
                            ops
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/poco" title="poco">
                            poco
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/pptp" title="pptp">
                            pptp
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/python" title="python">
                            python
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/rd" title="rd">
                            rd
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/spring" title="spring">
                            spring
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/springboot" title="springboot">
                            springboot
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/ssl" title="ssl">
                            ssl
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/thymeleaf" title="thymeleaf">
                            thymeleaf
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/type" title="type">
                            type
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/vagrant" title="vagrant">
                            vagrant
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/vpn" title="vpn">
                            vpn
                        </a>
                        
                        
                        
                        <a href="/tags/vue" title="vue">
                            vue
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/webrtc" title="webrtc">
                            webrtc
                        </a>
                        
                        
                        
                        <a href="/tags/workflow" title="workflow">
                            workflow
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0" title="技术文章">
                            技术文章
                        </a>
                        
                        
                        
                        <a href="/tags/%E6%96%B0%E6%B5%AA%E5%8D%9A%E5%AE%A2" title="新浪博客">
                            新浪博客
                        </a>
                        
                        
                        
                        <a href="/tags/%E6%97%A0%E8%81%8A" title="无聊">
                            无聊
                        </a>
                        
                        
                        
                        <a href="/tags/%E7%94%9F%E6%B4%BB" title="生活">
                            生活
                        </a>
                        
                        
                        
                        <a href="/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95" title="生活记录">
                            生活记录
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E8%82%A1%E7%A5%A8" title="股票">
                            股票
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%BF%90%E7%BB%B4" title="运维">
                            运维
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
                <section>
                    <hr>
                    <h5>链接</h5>
                    <ul class="list-inline">
                        
                        <li><a target="_blank" href="http://blog.sina.com.cn/vegas">青鸟的翅膀</a></li>
                        
                        <li><a target="_blank" href="http://blog.sina.com.cn/yoshikilau">Caffeine Park</a></li>
                        
                        <li><a target="_blank" href="http://huxpro.github.io">Theme From Hux</a></li>
                        
                    </ul>
                </section>
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">                  
                    
                    
                    <li>
                        <a href="https://twitter.com/miwenshu">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/vincentz">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
		            
                    
                    

		            
                    
                    <li>
                        <a target="_blank" href="/img/icwt.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-weixin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    <li>
                        <a target="_blank" href="https://github.com/vincentmi">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/miwenshu">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		           
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/5311815/vincent-mi">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
            
            
            
           
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="我的乐与怒" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
            
             </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 我的乐与怒 2024 | <a href="http://www.beian.miit.gov.cn" style="text-decoration: none;"> 蜀ICP备17040089号-2</a>
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https'){
       bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else{
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>


<script>
    
    var _baId = '2b745fdb2d90955bdfb8ad1194277073';

    
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-78738242-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>






</body>
</html>
