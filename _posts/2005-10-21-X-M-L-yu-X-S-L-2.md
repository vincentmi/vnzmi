---
layout:     post
title:      "XML与XSL(2)"
date:       2005-10-21 22:52:03
author:     "Vincent"
header-img:  "img/xinyuan-no7.jpg"
catalog: true
tags:
    - 新浪博客
    - 技术文章
---



　　上期我们学习了XSL元素&lt;xsl:if&gt;，已能通过测试XML数据的值来决定不同的输出形式，不知你尝试过没有，实际上&lt;xsl:for-each&gt;也可部分实现&lt;xsl:if&gt;的功能，但有时，我们希望对同一数据同时测试多个条件，根据不同条件输出相应结果。当然，我们可以用if，假如我们只有if可用的话。幸好我们有一个更好的选择，那就是用&lt;xsl:choose&gt;。下面介绍相关元素的语法：　　&lt;xsl:choose&gt;　　语法：&lt;xsl:choose&gt;　　属性：无，表示一个多选测试的开始
　　&lt;xsl:when&gt;　　语法：&lt;xsl:when expr="script-expression" language="language-name" test="pattern"&gt;　　属性：　　expr ── 脚本语言表达式，计算结果为"真"或"假"；如果结果为"真"，且通过test，则在输出中显示其中内容（可省略此项属性）。　　language ── expr属性中表达式的脚本语言类型，其取值与HTML标记SCRIPT的LANGUAGE属性的取值相同，缺省为"JScript"。　　test ── 源数据测试条件。
　　&lt;xsl:otherwise&gt;　　语法：&lt;xsl:otherwise&gt;　　属性：无，在一个多选测试中，如果没有不满足&lt;xsl:when&gt;规定的条件，如果在最后有此标记，则输出此标记中的内容。
　　示例：
　　此处以学生成绩单为例，要求按成绩的高低给出优秀（ &gt;85）、一般（70~85）、及格（60~69）、不及格（&lt; 60），而不是显示分数。其中成绩单的XML文档(文件名：grade.xml)如下：&lt;?xml version="1.0" encoding="GB2312"?&gt;&lt;?xml-stylesheet type="text/xsl" href="grade.xsl"?&gt;&lt;document&gt;&lt;grade&gt;&lt;name&gt;大胖&lt;/name&gt;&lt;english&gt;80&lt;/english&gt;&lt;math&gt;90&lt;/math&gt;&lt;chymest&gt;90&lt;/chymest&gt;&lt;/grade&gt;&lt;grade&gt;&lt;name&gt;小花&lt;/name&gt;&lt;english&gt;98&lt;/english&gt;&lt;math&gt;70&lt;/math&gt;&lt;chymest&gt;85&lt;/chymest&gt;&lt;/grade&gt;&lt;/document&gt;
　　为实现按分数分等级显示，其XSL文档（文件名：grade.xsl）内容如下：
&lt;?xml version="1.0" encoding="GB2312"?&gt;&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/TR/WD-xsl"&gt;&lt;xsl:template match="/"&gt;&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;成绩单&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;xsl:apply-templates select="document"/&gt;&lt;/BODY&gt;&lt;/HTML&gt;&lt;/xsl:template&gt;
&lt;xsl:template match="document"&gt;&lt;TABLE border="1" cellspacing="0"&gt;&lt;TH&gt;姓名&lt;/TH&gt;&lt;TH&gt;英语&lt;/TH&gt;&lt;TH&gt;数学&lt;/TH&gt;&lt;TH&gt;化学&lt;/TH&gt;&lt;xsl:apply-templates select="grade"/&gt;&lt;/TABLE&gt;&lt;/xsl:template&gt;
&lt;xsl:template match="grade"&gt;&lt;TR&gt;&lt;TD&gt;&lt;xsl:apply-templates select="name"/&gt;&lt;/TD&gt;&lt;TD&gt;&lt;xsl:apply-templates select="english"/&gt;&lt;/TD&gt;&lt;TD&gt;&lt;xsl:apply-templates select="math"/&gt;&lt;/TD&gt;&lt;TD&gt;&lt;xsl:apply-templates select="chymest"/&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/xsl:template&gt;
&lt;xsl:template match="name"&gt;&lt;xsl:value-of/&gt;&lt;/xsl:template&gt;
&lt;xsl:template match="english|math|chymest"&gt;&lt;xsl:choose&gt;&lt;xsl:when test=".[value()$gt$85]"&gt;优秀&lt;/xsl:when&gt;&lt;xsl:when test=".[value()$gt$70]"&gt;一般&lt;/xsl:when&gt;&lt;xsl:when test=".[value()$gt$60]"&gt;起格&lt;/xsl:when&gt;&lt;xsl:otherwise&gt;不起格&lt;/xsl:otherwise&gt;&lt;/xsl:choose&gt;&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
上例在浏览器中的样子(IE5.0或更新版本)
　　说明：在&lt;xsl:choose&gt;选择中，从第一个&lt;xsl:when&gt;开始，逐个测试，直到满足一个测试条件就将其中的内容输出，不再测试后面的条件；如果不满足任何一个条件，则输出&lt;xsl:otherwise&gt;中的内容。　　标记对&lt;xsl:when&gt;&lt;/xsl:when&gt;与&lt;xsl:otherwise&gt;&lt;/xsl:otherwise&gt;中可嵌套&lt;xsl:if&gt;或&lt;xsl:choose&gt;。
出处：CSDN  作者：禹希初 





转移自: (http://blog.sina.com.cn/s/blog_542a39550100004s.html)[http://blog.sina.com.cn/s/blog_542a39550100004s.html]